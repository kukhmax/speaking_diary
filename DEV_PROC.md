# DEV_PROC — Шаг 1: Мобильное веб‑приложение дневника

Цель
- Создать минимальный, рабочий mobile‑first UI и API дневника без использования устаревших директорий.

Реализовано
- База данных: SQLite в `data/diary.sqlite`, таблица `entries (id, created_at, text)`.
- Инициализация: БД создаётся автоматически при старте приложения.
- API (FastAPI):
  - `GET /health` — проверка здоровья сервера.
  - `GET /` — главная страница (Jinja2 шаблон).
  - `GET /api/entries` — список последних записей (JSON).
  - `POST /api/entries` — создание записи из текста.
  - `POST /api/transcribe` — приём аудио (`form-data`) и возврат заглушки распознавания.
- UI (mobile‑first):
  - Главная страница с кнопкой «Создать запись».
  - Дерево записей, сгруппированных по датам (`YYYY-MM-DD`).
  - Модальное окно с микрофоном (MediaRecorder), кнопкой транскрибации и кнопкой «Сохранить».
- Файлы проекта:
  - `webapp/main.py` — сервер FastAPI, маршруты и инициализация БД.
  - `webapp/templates/index.html` — главная страница.
  - `webapp/static/app.js` — логика UI: запись аудио, транскрибация, сохранение, рендер дерева.
  - `webapp/static/styles.css` — мобильные стили.
  - `db/storage.py`, `db/__init__.py` — работа с SQLite: `init_db`, `add_entry`, `list_entries`, `get_entry`.
- Зависимости: добавлены `jinja2` (шаблоны) и `python-multipart` (form‑data для аудио).

Запуск и проверка
- Установить зависимости: `python -m pip install -r requirements.txt`
- Запустить дев‑сервер: `python -m uvicorn webapp.main:app --reload --port 8000`
- Открыть: `http://127.0.0.1:8000/` и проверить:
  - Создание записи через модальное окно.
  - Появление записи в дереве дат.
  - Отправку аудио и получение текстовой заглушки транскрибации.

Примечания
- Путь БД можно изменить через переменную окружения `DATABASE_URL` (по умолчанию `data/diary.sqlite`).
- Папка `.lagacy_diary` не используется.